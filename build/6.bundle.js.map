{"version":3,"sources":["webpack:///./src/features/Soundcloud/SoundcloudTrack.tsx","webpack:///./src/features/Soundcloud/Soundcloud.tsx","webpack:///./src/pages/Home.tsx"],"names":["getImgSrc","url","dim","index","lastIndexOf","dot","url500","substr","includes","artwork_url","genre","permalink_url","playlistIndex","title","activeIndex","playing","setActiveIndex","soundCloudAudio","isPlaying","src","srcSet","imgStyle","animationDelay","Math","random","animationDuration","className","trim","media","alt","style","Link","href","onTogglePlay","e","preventDefault","pause","play","p","tracks","playlist","map","track","i","key","id","Third","Spinner"],"mappings":"mIAOMA,EAAY,SAACC,EAAUC,QAAV,IAAAD,MAAA,SAAU,IAAAC,MAAA,KAC3B,IAAMC,EAAQF,EAAIG,YAAY,SACxBC,EAAMJ,EAAIG,YAAY,KACtBE,EAAYL,EAAIM,OAAO,EAAGJ,GAAM,IAAID,EAAG,IAAIA,EAAMD,EAAIM,OAAOF,GAClE,OAAOC,GAAUA,EAAOE,SAAS,KAAOF,EAASL,GA0EpC,EA/DS,SAAC,G,IACvBQ,EAAW,cACXC,EAAK,QACLC,EAAa,gBACbC,EAAa,gBACbC,EAAK,QAEC,EAKF,aAAiB,KAJnBC,EAAW,cACXC,EAAO,UACPC,EAAc,iBACdC,EAAe,kBAGXC,EAAYH,GAAWD,IAAgBF,EAYvC,EAA4B,WAChC,WAAM,OACJO,IAAKnB,EAAUS,EAAa,KAC5BW,OAAQpB,EAAUS,GAClBY,SAAU,CACRC,eAAmC,EAAhBC,KAAKC,SAAY,IACpCC,kBAAsC,EAAhBF,KAAKC,SAAe,EAAC,QAG/C,CAACf,IATKY,EAAQ,WAAEF,EAAG,MAAEC,EAAM,SAY7B,OACE,uBACEM,WAAW,oBACTX,GAAWG,EAAY,YAAc,KACpCS,QAEH,+BACE,0BAAQP,OAAQA,EAAQQ,MAAM,uBAC9B,uBACEC,IAAKhB,EACLa,UAAU,4BACVP,IAAKA,EACLW,MAAOT,KAGX,gBAACU,EAAA,EAAI,CAACL,UAAU,MAAMM,KAAMrB,GAAgB,IAAID,GAChD,gBAAC,aAAU,CACTuB,aAvCa,SAACC,GACdA,GAAGA,EAAEC,iBACLjB,EACFD,EAAgBmB,SAEhBpB,EAAeJ,GACfK,EAAgBoB,KAAK,CAAEzB,cAAa,MAkClCG,QAASA,GAAWG,EACpBD,gBAAiBA,M,+NChDV,EApBI,W,MACXqB,EAAI,aAAiB,KACrBC,GAAoB,QAAX,EAAAD,aAAC,EAADA,EAAGE,gBAAQ,eAAED,SAAU,GAEtC,OACE,uBAAKb,UAAU,cACZY,EAAEE,SACDD,EAAOE,KAAI,SAACC,EAAOC,GAAM,OAEvB,gBAAC,EAAe,GAACC,IAAKF,EAAMG,GAAIjC,cAAe+B,GAAOD,OAGxD,gBAACI,EAAA,EAAK,KACJ,gBAACC,EAAA,EAAO,SCbH,UARF,WACX,OACE,uBAAKrB,UAAU,QACb,gBAAC,EAAU","file":"6.bundle.js","sourcesContent":["import * as React from 'react';\n// @ts-ignore\nimport { PlayButton } from 'react-soundplayer/components';\nimport { Link } from '../../components';\nimport { SoundcloudContext } from '../../hooks/useSoundcloud';\nimport './SoundcloudTrack.scss';\n\nconst getImgSrc = (url = '', dim = 500) => {\n  const index = url.lastIndexOf('large');\n  const dot = url.lastIndexOf('.');\n  const url500 = `${url.substr(0, index)}t${dim}x${dim}${url.substr(dot)}`;\n  return url500 && url500.includes('.') ? url500 : url;\n};\n\ntype SoundcloudTrackProps = {\n  artwork_url: string;\n  genre: string;\n  permalink_url: string;\n  playlistIndex: number;\n  title: string;\n};\n\nconst SoundcloudTrack = ({\n  artwork_url,\n  genre,\n  permalink_url,\n  playlistIndex,\n  title,\n}: SoundcloudTrackProps) => {\n  const {\n    activeIndex,\n    playing,\n    setActiveIndex,\n    soundCloudAudio,\n  } = React.useContext(SoundcloudContext);\n\n  const isPlaying = playing && activeIndex === playlistIndex;\n\n  const handlePlay = (e: MouseEvent) => {\n    if (e) e.preventDefault();\n    if (isPlaying) {\n      soundCloudAudio.pause();\n    } else {\n      setActiveIndex(playlistIndex);\n      soundCloudAudio.play({ playlistIndex });\n    }\n  };\n\n  const { imgStyle, src, srcSet } = React.useMemo(\n    () => ({\n      src: getImgSrc(artwork_url, 200),\n      srcSet: getImgSrc(artwork_url),\n      imgStyle: {\n        animationDelay: `${Math.random() * 6}s`,\n        animationDuration: `${Math.random() * 6 + 6}s`,\n      },\n    }),\n    [artwork_url],\n  );\n\n  return (\n    <div\n      className={`SoundcloudTrack ${\n        playing && isPlaying ? 'is-active' : ''\n      }`.trim()}\n    >\n      <picture>\n        <source srcSet={srcSet} media=\"(min-width: 568px)\" />\n        <img\n          alt={title}\n          className=\"SoundcloudTrack--AlbumArt\"\n          src={src}\n          style={imgStyle}\n        />\n      </picture>\n      <Link className=\"tag\" href={permalink_url}>{`#${genre}`}</Link>\n      <PlayButton\n        onTogglePlay={handlePlay}\n        playing={playing && isPlaying}\n        soundCloudAudio={soundCloudAudio}\n      />\n    </div>\n  );\n};\n\nexport default SoundcloudTrack;\n","import * as React from 'react';\nimport { SoundcloudContext } from '../../hooks/useSoundcloud';\nimport SoundcloudTrack from './SoundcloudTrack';\nimport './Soundcloud.scss';\nimport { Spinner } from '../../components/Icons';\nimport { Third } from '../../components';\n\n// https://api.soundcloud.com/resolve.json?url=https%3A%2F%2Fsoundcloud.com%2Faudiosprite%2Fsets%2Freel&client_id=9f32c400308da184e94e83dbbf3391c7\n// 303's to:\n// https://api.soundcloud.com/playlists/310569779.json?client_id=9f32c400308da184e94e83dbbf3391c7\n\nconst Soundcloud = () => {\n  const p = React.useContext(SoundcloudContext);\n  const tracks = p?.playlist?.tracks || [];\n\n  return (\n    <div className=\"Soundcloud\">\n      {p.playlist ? (\n        tracks.map((track, i) => (\n          // @ts-ignore\n          <SoundcloudTrack key={track.id} playlistIndex={i} {...track} />\n        ))\n      ) : (\n        <Third>\n          <Spinner />\n        </Third>\n      )}\n    </div>\n  );\n};\n\nexport default Soundcloud;\n","import * as React from 'react';\nimport { Soundcloud } from '../features';\n\nconst Home = () => {\n  return (\n    <div className=\"Home\">\n      <Soundcloud />\n    </div>\n  );\n};\n\nexport default Home;\n"],"sourceRoot":""}